/*
 * Harness feature flag service client apis
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: cf@harness.io
 *
 * NOTE: This class is auto generated by the OAS code generator program.
 * https://github.com/OpenAPITools/openapi-generator
 * Do not edit the class manually.
 */
public class FFClientApi {
    FFBaseCallout client;

    public FFClientApi(FFBaseCallout client) {
        this.client = client;
    }

    public FFBaseCallout getClient() {
        return this.client;
    }

    /**
     * Authenticate with the admin server.
     * Used to retrieve all target segments for certain account id.
     * @param ffAuthenticationRequest  (optional)
     * @return FFAuthenticationResponse
     * @throws FFBase.ApiException if fails to make API call
     */
    public FFAuthenticationResponse authenticate(Map<String, Object> params) {
        List<FFBase.Param> query = new List<FFBase.Param>();
        List<FFBase.Param> form = new List<FFBase.Param>();

        return (FFAuthenticationResponse) client.invoke(
            'POST', '/client/auth',
            (FFAuthenticationRequest) params.get('ffAuthenticationRequest'),
            query, form,
            new Map<String, Object>(),
            new Map<String, Object>(),
            new List<String>{ 'application/json' },
            new List<String>{ 'application/json' },
            new List<String>(),
            FFAuthenticationResponse.class
        );
    }

    /**
     * Get all feature flags activations
     * 
     * @param environmentUUID Unique identifier for the environment object in the API. (required)
     * @param cluster Unique identifier for the cluster for the account (optional)
     * @return List<FFFeatureConfig>
     * @throws FFBase.ApiException if fails to make API call
     */
    public List<FFFeatureConfig> getFeatureConfigs(Map<String, Object> params) {
        client.assertNotNull(params.get('environmentUUID'), 'environmentUUID');
        List<FFBase.Param> query = new List<FFBase.Param>();

        // cast query params to verify their expected type
        query.addAll(client.makeParam('cluster', (String) params.get('cluster')));

        List<FFBase.Param> form = new List<FFBase.Param>();

        return (List<FFFeatureConfig>) client.invoke(
            'GET', '/client/env/{environmentUUID}/feature-configs', '',
            query, form,
            new Map<String, Object>{
                'environmentUUID' => (String) params.get('environmentUUID')
            },
            new Map<String, Object>(),
            new List<String>{ 'application/json' },
            new List<String>(),
            new List<String> { 'BearerAuth' },
            List<FFFeatureConfig>.class
        );
    }

     /**
     * Used to retrieve all segments for certain account id.
     * 
     * @param environmentUUID Unique identifier for the environment object in the API. (required)
     * @param cluster Unique identifier for the cluster for the account (optional)
     * @return List<FFTargetSegment>
     * @throws FFBase.ApiException if fails to make API call
     */
    public List<FFTargetSegment> getTargetSegments(Map<String, Object> params) {
        client.assertNotNull(params.get('environmentUUID'), 'environmentUUID');
        List<FFBase.Param> query = new List<FFBase.Param>();

        // cast query params to verify their expected type
        query.addAll(client.makeParam('cluster', (String) params.get('cluster')));

        List<FFBase.Param> form = new List<FFBase.Param>();

        return (List<FFTargetSegment>) client.invoke(
            'GET', '/client/env/{environmentUUID}/target-segments', '',
            query, form,
            new Map<String, Object>{
                'environmentUUID' => (String) params.get('environmentUUID')
            },
            new Map<String, Object>(),
            new List<String>{ 'application/json' },
            new List<String>(),
            new List<String> { 'BearerAuth' },
            List<FFTargetSegment>.class
        );
    }

    /**
     * Get feature evaluations for target
     * 
     * @param environmentUUID Unique identifier for the environment object in the API. (required)
     * @param feature Unique identifier for the flag object in the API. (required)
     * @param target Unique identifier for the target object in the API. (required)
     * @param cluster Unique identifier for the cluster for the account (optional)
     * @return FFEvaluation
     * @throws FFBase.ApiException if fails to make API call
     */
    public FFEvaluation getEvaluationByIdentifier(Map<String, Object> params) {
        client.assertNotNull(params.get('environmentUUID'), 'environmentUUID');
        client.assertNotNull(params.get('feature'), 'feature');
        client.assertNotNull(params.get('target'), 'target');
        List<FFBase.Param> query = new List<FFBase.Param>();

        // cast query params to verify their expected type
        query.addAll(client.makeParam('cluster', (String) params.get('cluster')));

        List<FFBase.Param> form = new List<FFBase.Param>();

        return (FFEvaluation) client.invoke(
            'GET', '/client/env/{environmentUUID}/target/{target}/evaluations/{feature}', '',
            query, form,
            new Map<String, Object>{
                'environmentUUID' => (String) params.get('environmentUUID'),
                'feature' => (String) params.get('feature'),
                'target' => (String) params.get('target')
            },
            new Map<String, Object>(),
            new List<String>{ 'application/json' },
            new List<String>(),
            new List<String> { 'BearerAuth' },
            FFEvaluation.class
        );
    }
    /**
     * Get feature evaluations for target
     * 
     * @param environmentUUID Unique identifier for the environment object in the API. (required)
     * @param target Unique identifier for the target object in the API. (required)
     * @param cluster Unique identifier for the cluster for the account (optional)
     * @return List<FFEvaluation>
     * @throws FFBase.ApiException if fails to make API call
     */
    public List<FFEvaluation> getEvaluations(Map<String, Object> params) {
        client.assertNotNull(params.get('environmentUUID'), 'environmentUUID');
        client.assertNotNull(params.get('target'), 'target');
        List<FFBase.Param> query = new List<FFBase.Param>();

        // cast query params to verify their expected type
        query.addAll(client.makeParam('cluster', (String) params.get('cluster')));

        List<FFBase.Param> form = new List<FFBase.Param>();

        return (List<FFEvaluation>) client.invoke(
            'GET', '/client/env/{environmentUUID}/target/{target}/evaluations', '',
            query, form,
            new Map<String, Object>{
                'environmentUUID' => (String) params.get('environmentUUID'),
                'target' => (String) params.get('target')
            },
            new Map<String, Object>(),
            new List<String>{ 'application/json' },
            new List<String>(),
            new List<String> { 'BearerAuth' },
            List<FFEvaluation>.class
        );
    }

    /**
     * Stream endpoint.
     * 
     * @param apIKey  (required)
     * @param cluster Unique identifier for the cluster for the account (optional)
     * @throws FFBase.ApiException if fails to make API call
     */
    public void stream(Map<String, Object> params) {
        client.assertNotNull(params.get('apIKey'), 'apIKey');
        List<FFBase.Param> query = new List<FFBase.Param>();

        // cast query params to verify their expected type
        query.addAll(client.makeParam('cluster', (String) params.get('cluster')));

        List<FFBase.Param> form = new List<FFBase.Param>();

        client.invoke(
            'GET', '/stream', '',
            query, form,
            new Map<String, Object>(),
            new Map<String, Object>{
                'API-Key' => (String) params.get('apIKey')
            },
            new List<String>(),
            new List<String>(),
            new List<String> { 'BearerAuth' },
            null
        );
    }
}
